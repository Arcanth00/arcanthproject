<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcanth Admin Panel</title>
    <link rel="icon" type="image/png" href="logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #020408; color: #e2e8f0; }
        #loading-screen { position: fixed; inset: 0; z-index: 10000; background: #020408; display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 2rem; transition: opacity 0.8s ease, visibility 0.8s ease; }
        #loading-screen.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .loader-ring { width: 56px; height: 56px; border: 3px solid rgba(59,130,246,0.15); border-top-color: #3b82f6; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .sidebar { background: rgba(10,15,26,0.95); border-right: 1px solid rgba(255,255,255,0.05); backdrop-filter: blur(20px); }
        .glass { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06); border-radius: 1rem; transition: all 0.3s; }
        .glass:hover { border-color: rgba(59,130,246,0.2); }
        .input-f { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); color: white; padding: 0.75rem 1rem; border-radius: 0.75rem; width: 100%; outline: none; transition: border-color 0.2s; font-size: 0.875rem; }
        .input-f:focus { border-color: #3b82f6; }
        .btn-p { background: linear-gradient(135deg,#3b82f6,#6366f1); color: white; padding: 0.625rem 1.25rem; border-radius: 0.625rem; font-weight: 700; font-size: 0.75rem; cursor: pointer; border: none; text-transform: uppercase; letter-spacing: 0.05em; transition: all 0.2s; }
        .btn-p:hover { transform: translateY(-1px); box-shadow: 0 8px 20px rgba(59,130,246,0.3); }
        .btn-d { background: rgba(239,68,68,0.1); color: #f87171; border: 1px solid rgba(239,68,68,0.2); padding: 0.375rem 0.75rem; border-radius: 0.5rem; font-size: 0.7rem; font-weight: 700; cursor: pointer; transition: all 0.2s; }
        .btn-d:hover { background: rgba(239,68,68,0.2); }
        .btn-s { background: rgba(255,255,255,0.06); color: white; border: 1px solid rgba(255,255,255,0.1); padding: 0.375rem 0.75rem; border-radius: 0.5rem; font-size: 0.7rem; font-weight: 700; cursor: pointer; transition: all 0.2s; }
        .btn-s:hover { background: rgba(255,255,255,0.1); }
        .tab-c { display: none; animation: fadeIn 0.3s ease; }
        .tab-c.active { display: block; }
        .nav-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; border-radius: 0.625rem; font-size: 0.8rem; font-weight: 600; color: #9ca3af; cursor: pointer; transition: all 0.2s; border: 1px solid transparent; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: white; }
        .nav-item.active { background: rgba(59,130,246,0.15); color: #60a5fa; border-color: rgba(59,130,246,0.2); }
        .stat { background: linear-gradient(135deg, rgba(59,130,246,0.08), rgba(99,102,241,0.08)); border: 1px solid rgba(59,130,246,0.15); border-radius: 1rem; padding: 1.25rem; transition: all 0.2s; }
        .stat:hover { transform: translateY(-3px); border-color: rgba(59,130,246,0.3); }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-box { background: #0a0f1a; border: 1px solid rgba(255,255,255,0.08); border-radius: 1.25rem; padding: 2rem; max-width: 500px; width: 90%; max-height: 85vh; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; }
        th { padding: 0.75rem; text-align: left; font-size: 0.65rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; border-bottom: 1px solid rgba(255,255,255,0.06); }
        td { padding: 0.75rem; border-bottom: 1px solid rgba(255,255,255,0.04); font-size: 0.8rem; }
        .sync-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
        .sync-ok { background: #22c55e; box-shadow: 0 0 6px rgba(34,197,94,0.5); animation: pulse-green 2s infinite; }
        .sync-err { background: #ef4444; box-shadow: 0 0 6px rgba(239,68,68,0.5); }
        .sync-loading { background: #eab308; animation: pulse 1s infinite; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.4; } }
        @keyframes pulse-green { 0%,100% { opacity: 1; } 50% { opacity: 0.6; } }
        .checkbox-wrapper { position: relative; display: inline-flex; align-items: center; cursor: pointer; }
        .checkbox-wrapper input { position: absolute; opacity: 0; cursor: pointer; }
        .checkmark { height: 20px; width: 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 4px; transition: all 0.2s; }
        .checkbox-wrapper:hover .checkmark { background: rgba(255,255,255,0.08); }
        .checkbox-wrapper input:checked ~ .checkmark { background: #3b82f6; border-color: #3b82f6; }
        .checkmark:after { content: ""; position: absolute; display: none; left: 6px; top: 2px; width: 5px; height: 10px; border: solid white; border-width: 0 2px 2px 0; transform: rotate(45deg); }
        .checkbox-wrapper input:checked ~ .checkmark:after { display: block; }
        @media (max-width: 1023px) { .sidebar { display: none; } }
    </style>
</head>
<body>
    <div id="loading-screen">
        <img src="logo.png" class="w-16 h-16 rounded-2xl animate-pulse" onerror="this.style.display='none'">
        <div class="loader-ring"></div>
        <p class="text-gray-500 text-sm font-bold tracking-[0.3em] uppercase">Yükleniyor</p>
    </div>

    <div id="login" class="fixed inset-0 z-[9999] flex items-center justify-center hidden" style="background:#020408">
        <div class="glass p-10 max-w-sm w-full mx-4">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-blue-500/10 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                </div>
                <h1 class="text-2xl font-black uppercase tracking-tight"><span class="text-blue-500">ArcanthProject</span> Admin</h1>
                <p class="text-gray-500 text-xs mt-1">Google hesabınızla giriş yapın</p>
            </div>
            <div class="space-y-3">
                <button onclick="doGoogleLogin()" class="btn-p w-full py-3 flex items-center justify-center gap-2">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"/></svg>
                    Google ile Giriş
                </button>
                <label class="checkbox-wrapper text-sm text-gray-400 flex items-center gap-2 justify-center">
                    <input type="checkbox" id="rememberMe">
                    <span class="checkmark"></span>
                    Beni Hatırla
                </label>
                <p id="loginErr" class="text-red-500 text-xs text-center hidden font-bold"></p>
            </div>
        </div>
    </div>

    <div id="admin" style="display:none" class="flex min-h-screen">
        <aside class="sidebar w-64 fixed inset-y-0 left-0 flex flex-col z-50">
            <div class="p-6 border-b border-white/5">
                <div class="flex items-center gap-3">
                    <img src="logo.png" class="w-9 h-9 rounded-lg" onerror="this.style.display='none'">
                    <div>
                        <p class="font-black text-sm uppercase tracking-tight">Arcanth Project</p>
                        <p class="text-[10px] text-gray-500 font-semibold">Admin Panel</p>
                    </div>
                </div>
            </div>
            <nav class="flex-1 p-4 space-y-1">
                <div class="nav-item active" onclick="go('dashboard',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/></svg>
                    Dashboard
                </div>
                <div class="nav-item" onclick="go('announcements',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"/></svg>
                    Duyurular
                </div>
                <div class="nav-item" onclick="go('projects',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>
                    Projeler
                </div>
                <div class="nav-item" onclick="go('downloads',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                    İndirmeler
                </div>
                <div class="nav-item" onclick="go('sponsors',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    Sponsorlar
                </div>
                <div class="nav-item" onclick="go('support',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                    Destek Talepleri
                </div>
                <div class="nav-item" onclick="go('cms',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
                    CMS
                </div>
                <div class="nav-item" onclick="go('cookies',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    Çerezler
                </div>
                <div class="nav-item" onclick="go('activity',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    Aktivite
                </div>
                <div class="nav-item" onclick="go('settings',this)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                    Ayarlar
                </div>
            </nav>
            <div class="p-4 border-t border-white/5">
                <div class="flex items-center gap-3 mb-3">
                    <span class="sync-dot sync-ok" id="sync-dot"></span>
                    <span class="text-xs text-gray-500 font-semibold" id="sync-text">Sistem Sorunsuz</span>
                </div>
                <div class="mb-3 px-1 text-[10px] text-blue-400 font-mono overflow-hidden text-ellipsis whitespace-nowrap" id="current-user-uid"></div>
                <button onclick="doLogout()" class="w-full text-left nav-item text-red-400 hover:text-red-300 hover:bg-red-500/10 border-transparent hover:border-red-500/20">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
                    Güvenli Çıkış
                </button>
            </div>
        </aside>

        <div class="flex-1 lg:ml-64 p-6 pb-20 lg:pb-6">
            <div id="t-dashboard" class="tab-c active space-y-6">
                <h2 class="text-2xl font-black">Genel Durum</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="stat"><p class="text-[10px] font-bold uppercase text-gray-500 tracking-wider">Duyurular</p><p class="text-3xl font-black mt-1" id="s-ann">0</p></div>
                    <div class="stat"><p class="text-[10px] font-bold uppercase text-gray-500 tracking-wider">Projeler</p><p class="text-3xl font-black mt-1" id="s-proj">0</p></div>
                    <div class="stat"><p class="text-[10px] font-bold uppercase text-gray-500 tracking-wider">İndirmeler</p><p class="text-3xl font-black mt-1" id="s-dl">0</p></div>
                    <div class="stat"><p class="text-[10px] font-bold uppercase text-gray-500 tracking-wider">Sponsorlar</p><p class="text-3xl font-black mt-1" id="s-sponsor">0</p></div>
                </div>
                <div class="glass p-6">
                    <h3 class="font-bold mb-2 text-blue-400">Hoş Geldiniz</h3>
                    <p class="text-gray-400 text-sm" id="system-status">Sistem Sorunsuz Çalışıyor</p>
                </div>
            </div>

            <div id="t-announcements" class="tab-c space-y-6">
                <div class="flex items-center justify-between"><h2 class="text-2xl font-black">Duyurular</h2><button onclick="openModal('ann')" class="btn-p">+ Yeni</button></div>
                <div class="glass p-4 overflow-x-auto"><table><thead><tr><th>Başlık</th><th>Kategori</th><th>Tarih</th><th>İşlem</th></tr></thead><tbody id="annList"></tbody></table></div>
            </div>

            <div id="t-projects" class="tab-c space-y-6">
                <div class="flex items-center justify-between"><h2 class="text-2xl font-black">Projeler</h2><button onclick="openModal('proj')" class="btn-p">+ Yeni</button></div>
                <div class="glass p-4 overflow-x-auto"><table><thead><tr><th>Ad</th><th>Tip</th><th>Durum</th><th>Ver.</th><th>İşlem</th></tr></thead><tbody id="projList"></tbody></table></div>
            </div>

            <div id="t-downloads" class="tab-c space-y-6">
                <div class="flex items-center justify-between"><h2 class="text-2xl font-black">İndirmeler</h2><button onclick="openModal('dl')" class="btn-p">+ Yeni</button></div>
                <div class="glass p-4 overflow-x-auto"><table><thead><tr><th>İsim</th><th>Ver.</th><th>Tip</th><th>Link</th><th>İşlem</th></tr></thead><tbody id="dlList"></tbody></table></div>
            </div>

            <div id="t-sponsors" class="tab-c space-y-6">
                <div class="flex items-center justify-between"><h2 class="text-2xl font-black">Sponsorlar</h2><button onclick="openModal('sponsor')" class="btn-p">+ Yeni</button></div>
                <div id="sponsorList" class="space-y-4"></div>
            </div>

            <div id="t-support" class="tab-c space-y-6">
                <h2 class="text-2xl font-black">Destek Talepleri</h2>
                <div class="glass p-4 overflow-x-auto">
                    <table>
                        <thead>
                            <tr>
                                <th>Kullanıcı</th>
                                <th>Konu</th>
                                <th>Kategori</th>
                                <th>Durum</th>
                                <th>Tarih</th>
                                <th>İşlem</th>
                            </tr>
                        </thead>
                        <tbody id="supportList"></tbody>
                    </table>
                </div>
            </div>

            <div id="t-cms" class="tab-c space-y-6">
                <h2 class="text-2xl font-black">CMS İçerik</h2>
                <div class="glass p-6 space-y-4">
                    <h3 class="font-bold text-sm uppercase text-gray-500">Ana Sayfa Hero</h3>
                    <input type="text" id="cmsBadge" class="input-f" placeholder="Badge">
                    <input type="text" id="cmsTitle" class="input-f" placeholder="Başlık">
                    <textarea id="cmsSub" class="input-f" rows="2" placeholder="Alt Başlık"></textarea>
                    <button onclick="saveCMS()" class="btn-p">Kaydet</button>
                </div>
            </div>

            <div id="t-cookies" class="tab-c space-y-6">
                <h2 class="text-2xl font-black">Çerez Ayarları</h2>
                <div class="glass p-6 space-y-4">
                    <input type="text" id="cookieTitle" class="input-f" placeholder="Başlık">
                    <textarea id="cookieDesc" class="input-f" rows="2" placeholder="Açıklama"></textarea>
                    <div class="grid grid-cols-2 gap-4">
                        <input type="text" id="cookieAccept" class="input-f" placeholder="Kabul">
                        <input type="text" id="cookieReject" class="input-f" placeholder="Reddet">
                    </div>
                    <button onclick="saveCookies()" class="btn-p">Kaydet</button>
                </div>
            </div>

            <div id="t-activity" class="tab-c space-y-6">
                <div class="flex items-center justify-between"><h2 class="text-2xl font-black">Aktivite</h2><button onclick="clearAct()" class="btn-d">Temizle</button></div>
                <div id="actList" class="space-y-2"></div>
            </div>

            <div id="t-settings" class="tab-c space-y-6">
                <h2 class="text-2xl font-black">Ayarlar</h2>
                <div class="glass p-6 space-y-4">
                    <h3 class="font-bold text-sm uppercase text-gray-500">Sosyal Medya</h3>
                    <input type="url" id="sDiscord" class="input-f" placeholder="Discord URL">
                    <input type="url" id="sGithub" class="input-f" placeholder="GitHub URL">
                    <input type="url" id="sInstagram" class="input-f" placeholder="Instagram URL">
                    <input type="url" id="sYoutube" class="input-f" placeholder="YouTube URL">
                    <input type="url" id="sTwitter" class="input-f" placeholder="Twitter/X URL">
                    <button onclick="saveSettings()" class="btn-p w-full">Kaydet</button>
                </div>
            </div>
        </div>
    </div>

    <div id="m-ann" class="modal"><div class="modal-box"><h3 class="text-xl font-black mb-4">Duyuru</h3><div class="space-y-3"><input type="text" id="annTitle" class="input-f" placeholder="Başlık"><textarea id="annContent" class="input-f" rows="4" placeholder="İçerik"></textarea><select id="annCat" class="input-f"><option value="bilgi">Bilgi</option><option value="guncelleme">Güncelleme</option><option value="onemli">Önemli</option><option value="etkinlik">Etkinlik</option></select><div class="flex gap-3"><button onclick="saveAnn()" class="btn-p flex-1">Kaydet</button><button onclick="closeModal('ann')" class="btn-s flex-1">İptal</button></div></div></div></div>
    <div id="m-proj" class="modal"><div class="modal-box"><h3 class="text-xl font-black mb-4">Proje</h3><div class="space-y-3"><input type="text" id="projName" class="input-f" placeholder="Ad"><textarea id="projDesc" class="input-f" rows="2" placeholder="Açıklama"></textarea><div class="grid grid-cols-2 gap-3"><input type="text" id="projVer" class="input-f" placeholder="v1.0"><select id="projType" class="input-f"><option value="modpack">ModPack</option><option value="mod">Mod</option><option value="texture">Texture Pack</option><option value="script">Script</option><option value="exe">.EXE Uygulama</option><option value="other">Diğer</option></select></div><select id="projStatus" class="input-f"><option value="release">Release</option><option value="beta">Beta</option><option value="alpha">Alpha</option><option value="development">Development</option></select><input type="url" id="projLink" class="input-f" placeholder="Link"><input type="text" id="projIcon" class="input-f" placeholder="İkon URL"><input type="text" id="projCat" class="input-f" placeholder="Kategori"><div class="flex gap-3"><button onclick="saveProj()" class="btn-p flex-1">Kaydet</button><button onclick="closeModal('proj')" class="btn-s flex-1">İptal</button></div></div></div></div>
    <div id="m-dl" class="modal"><div class="modal-box"><h3 class="text-xl font-black mb-4">İndirme</h3><div class="space-y-3"><input type="text" id="dlName" class="input-f" placeholder="İsim"><div class="grid grid-cols-2 gap-3"><input type="text" id="dlVer" class="input-f" placeholder="1.0"><select id="dlType" class="input-f"><option value="modpack">ModPack</option><option value="mod">Mod</option><option value="texture">Texture Pack</option><option value="script">Script</option><option value="exe">.EXE Uygulama</option><option value="other">Diğer</option></select></div><input type="url" id="dlLink" class="input-f" placeholder="Link"><div class="flex gap-3"><button onclick="saveDl()" class="btn-p flex-1">Kaydet</button><button onclick="closeModal('dl')" class="btn-s flex-1">İptal</button></div></div></div></div>
    <div id="m-sponsor" class="modal"><div class="modal-box"><h3 class="text-xl font-black mb-4">Sponsor</h3><div class="space-y-3"><input type="text" id="spName" class="input-f" placeholder="İsim"><input type="text" id="spTag" class="input-f" placeholder="Slogan"><textarea id="spDesc" class="input-f" rows="2" placeholder="Açıklama"></textarea><input type="text" id="spLogo" class="input-f" placeholder="Logo URL"><input type="url" id="spWeb" class="input-f" placeholder="Website"><input type="url" id="spDiscord" class="input-f" placeholder="Discord"><input type="text" id="spIP" class="input-f" placeholder="IP"><textarea id="spFeatures" class="input-f" rows="3" placeholder="Özellikler (her satır 1)"></textarea><div class="flex gap-3"><button onclick="saveSponsor()" class="btn-p flex-1">Kaydet</button><button onclick="closeModal('sponsor')" class="btn-s flex-1">İptal</button></div></div></div></div>

    <script>
        const firebaseConfig={apiKey:"AIzaSyCnkk6j1CGsi4sNXJ8FA9Gd2B6_VDptVDg",authDomain:"arcanthproject.firebaseapp.com",databaseURL:"https://arcanthproject-default-rtdb.firebaseio.com",projectId:"arcanthproject",storageBucket:"arcanthproject.firebasestorage.app",messagingSenderId:"826341954149",appId:"1:826341954149:web:6429d61a5b40810009ac8c"};
        const allowedAdmins=["xjVwvdX1myZfTWhTxHwHUy3sQGt2","rBoqVOBlyRU5MHclICBtoKKR8Fe2"];
        firebase.initializeApp(firebaseConfig);
        const auth=firebase.auth(),provider=new firebase.auth.GoogleAuthProvider(),db=firebase.database();
        var K={ann:'admin_announcements',proj:'admin_projects',dl:'admin_downloads',sponsor:'admin_sponsors',cms:'admin_cms_content',cookies:'admin_cookie_settings',settings:'admin_settings',act:'admin_activity'};
        var editId={ann:null,proj:null,dl:null,sponsor:null};
        function g(id){return document.getElementById(id)}
        function ls(k,v){if(v!==undefined){localStorage.setItem(k,JSON.stringify(v));return v}if(k===K.cms||k===K.cookies||k===K.settings)return JSON.parse(localStorage.getItem(k)||'{}');return JSON.parse(localStorage.getItem(k)||'[]')}
        auth.onAuthStateChanged(user=>{if(user){if(allowedAdmins.includes(user.uid)){const rememberMe=localStorage.getItem('rememberMe')==='true';if(!rememberMe&&sessionStorage.getItem('currentSession')!=='active')sessionStorage.setItem('currentSession','active');setTimeout(()=>{g('loading-screen').classList.add('hidden');g('login').style.display='none';g('admin').style.display='flex';g('current-user-uid').textContent="UID: "+user.uid.substring(0,12)+"...";g('current-user-uid').title=user.uid;initApp()},800)}else{auth.signOut().then(()=>{g('loading-screen').classList.add('hidden');g('login').style.display='flex';g('loginErr').textContent="Yetkisiz UID: "+user.uid;g('loginErr').classList.remove('hidden')})}}else{setTimeout(()=>{g('loading-screen').classList.add('hidden');g('login').style.display='flex';g('admin').style.display='none'},800)}});
        window.addEventListener('beforeunload',()=>{if(localStorage.getItem('rememberMe')!=='true')sessionStorage.removeItem('currentSession')});
        function doGoogleLogin(){const rememberMe=g('rememberMe').checked;localStorage.setItem('rememberMe',rememberMe);if(!rememberMe)auth.setPersistence(firebase.auth.Auth.Persistence.SESSION);auth.signInWithPopup(provider).catch(e=>{g('loginErr').textContent="Hata: "+e.message;g('loginErr').classList.remove('hidden')})}
        function doLogout(){if(confirm('Çıkış yapmak istediğinize emin misiniz?')){localStorage.removeItem('rememberMe');sessionStorage.removeItem('currentSession');auth.signOut()}}
        function initApp(){[K.ann,K.proj,K.dl,K.sponsor].forEach(k=>{if(!localStorage.getItem(k))ls(k,[])});[K.cms,K.cookies,K.settings].forEach(k=>{if(!localStorage.getItem(k))ls(k,{})});loadAnn();loadProj();loadDl();loadSponsors();loadCMS();loadCookies();loadSettings();loadAct();loadSupport();stats();checkConnection()}
        async function loadSupport(){try{const snapshot=await db.ref('support_tickets').once('value');const tickets=[];snapshot.forEach(child=>{tickets.push(child.val())});tickets.sort((a,b)=>b.created.localeCompare(a.created));const el=g('supportList');const statusColors={aktif:'text-green-400 bg-green-500/15',beklemede:'text-yellow-400 bg-yellow-500/15',kapali:'text-gray-400 bg-gray-500/15'};el.innerHTML=tickets.map(t=>`<tr><td class="text-sm">${t.userEmail}</td><td class="font-semibold">${t.subject}</td><td><span class="px-2 py-0.5 bg-purple-500/15 text-purple-400 rounded text-[10px] font-bold uppercase">${t.category}</span></td><td><span class="px-2 py-0.5 rounded text-[10px] font-bold uppercase ${statusColors[t.status]||statusColors.aktif}">${t.status}</span></td><td class="text-gray-500 text-xs">${new Date(t.created).toLocaleString('tr-TR')}</td><td class="flex gap-1"><button onclick="viewTicket('${t.id}')" class="btn-s">Gör</button><button onclick="changeStatus('${t.id}')" class="btn-s">Durum</button><button onclick="delTicket('${t.id}')" class="btn-d">Sil</button></td></tr>`).join('')||'<tr><td colspan="6" class="text-center text-gray-500 py-8">Henüz destek talebi yok</td></tr>'}catch(e){g('supportList').innerHTML='<tr><td colspan="6" class="text-center text-red-500 py-8">Hata: '+e.message+'</td></tr>'}}
        async function viewTicket(id){try{const snapshot=await db.ref('support_tickets/'+id).once('value');const t=snapshot.val();if(t)alert(`DESTEK TALEBİ #${id}\n\nKullanıcı: ${t.userEmail}\nKonu: ${t.subject}\nKategori: ${t.category}\nDurum: ${t.status}\nTarih: ${new Date(t.created).toLocaleString('tr-TR')}\n\nMesaj:\n${t.message}`)}catch(e){alert('Hata: '+e.message)}}
        async function changeStatus(id){const newStatus=prompt('Yeni durum:\n\naktif\nbeklemede\nkapali');if(!newStatus||!['aktif','beklemede','kapali'].includes(newStatus))return;try{await db.ref('support_tickets/'+id+'/status').set(newStatus);loadSupport();log('Destek durumu güncellendi')}catch(e){alert('Hata: '+e.message)}}
        async function delTicket(id){if(!confirm('Bu destek talebini silmek istediğinize emin misiniz?'))return;try{await db.ref('support_tickets/'+id).remove();loadSupport();log('Destek talebi silindi')}catch(e){alert('Hata: '+e.message)}}
        async function checkConnection(){try{await db.ref('.info/connected').once('value');g('sync-dot').className='sync-dot sync-ok';g('sync-text').textContent='Sistem Sorunsuz';g('system-status').textContent='Sistem Sorunsuz Çalışıyor'}catch(e){g('sync-dot').className='sync-dot sync-err';g('sync-text').textContent='Bağlantı Hatası';g('system-status').textContent='Bağlantıda Sorun Var'}}
        async function sync(){g('sync-dot').className='sync-dot sync-loading';g('sync-text').textContent='Kaydediliyor...';try{await db.ref('site_data').set({announcements:ls(K.ann),projects:ls(K.proj),downloads:ls(K.dl),sponsors:ls(K.sponsor),cms_content:ls(K.cms),cookie_settings:ls(K.cookies),settings:ls(K.settings)});g('sync-dot').className='sync-dot sync-ok';g('sync-text').textContent='Sistem Sorunsuz';g('system-status').textContent='Sistem Sorunsuz Çalışıyor'}catch(e){g('sync-dot').className='sync-dot sync-err';g('sync-text').textContent='Hata: '+e.message;g('system-status').textContent='Bağlantıda Sorun Var'}}
        function go(tab,el){document.querySelectorAll('.tab-c').forEach(t=>t.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));g('t-'+tab).classList.add('active');if(el)el.classList.add('active')}
        function loadAnn(){var arr=ls(K.ann),el=g('annList');el.innerHTML=arr.map(a=>`<tr><td class="font-semibold">${a.title}</td><td><span class="px-2 py-0.5 bg-blue-500/15 text-blue-400 rounded text-[10px] font-bold uppercase">${a.category}</span></td><td class="text-gray-500 text-xs">${a.date}</td><td class="flex gap-1"><button onclick="openModal('ann',${a.id})" class="btn-s">Düz</button><button onclick="delAnn(${a.id})" class="btn-d">Sil</button></td></tr>`).join('')||'<tr><td colspan="4" class="text-center text-gray-500 py-8">Henüz duyuru yok</td></tr>'}
        function saveAnn(){var t=g('annTitle').value,c=g('annContent').value,cat=g('annCat').value;if(!t||!c)return alert('Lütfen tüm alanları doldurun');var arr=ls(K.ann);if(editId.ann){var i=arr.findIndex(x=>x.id===editId.ann);arr[i]={...arr[i],title:t,content:c,category:cat}}else{arr.push({id:Date.now(),title:t,content:c,category:cat,date:new Date().toLocaleDateString('tr-TR')})}ls(K.ann,arr);loadAnn();closeModal('ann');sync();log('Duyuru güncellendi');stats()}
        function delAnn(id){if(confirm('Silmek istediğinize emin misiniz?')){ls(K.ann,ls(K.ann).filter(x=>x.id!==id));loadAnn();sync();log('Duyuru silindi');stats()}}
        function loadProj(){var arr=ls(K.proj),el=g('projList');const sc={release:'text-green-400 bg-green-500/15',beta:'text-yellow-400 bg-yellow-500/15',alpha:'text-purple-400 bg-purple-500/15',development:'text-blue-400 bg-blue-500/15'};el.innerHTML=arr.map(p=>`<tr><td class="font-semibold">${p.name}</td><td><span class="px-2 py-0.5 bg-purple-500/15 text-purple-400 rounded text-[10px] font-bold uppercase">${p.type}</span></td><td><span class="px-2 py-0.5 rounded text-[10px] font-bold uppercase ${sc[p.status]}">${p.status}</span></td><td class="text-gray-500 text-xs">${p.version}</td><td class="flex gap-1"><button onclick="openModal('proj',${p.id})" class="btn-s">Düz</button><button onclick="delProj(${p.id})" class="btn-d">Sil</button></td></tr>`).join('')||'<tr><td colspan="5" class="text-center text-gray-500 py-8">Henüz proje yok</td></tr>'}
        function saveProj(){var n=g('projName').value,d=g('projDesc').value;if(!n)return alert('Proje adı gerekli');var arr=ls(K.proj);var obj={name:n,description:d,version:g('projVer').value||'v1.0',type:g('projType').value,category:g('projCat').value||'',status:g('projStatus').value,link:g('projLink').value,icon:g('projIcon').value};if(editId.proj){var i=arr.findIndex(x=>x.id===editId.proj);arr[i]={...arr[i],...obj}}else{arr.push({id:Date.now(),...obj})}ls(K.proj,arr);loadProj();closeModal('proj');sync();log('Proje güncellendi');stats()}
        function delProj(id){if(confirm('Silmek istediğinize emin misiniz?')){ls(K.proj,ls(K.proj).filter(x=>x.id!==id));loadProj();sync();log('Proje silindi');stats()}}
        function loadDl(){var arr=ls(K.dl),el=g('dlList');el.innerHTML=arr.map(d=>`<tr><td class="font-semibold">${d.name}</td><td class="text-gray-500 text-xs">${d.version}</td><td><span class="px-2 py-0.5 bg-cyan-500/15 text-cyan-400 rounded text-[10px] font-bold uppercase">${d.type}</span></td><td><a href="${d.link}" target="_blank" class="text-blue-400 hover:underline text-xs">Aç</a></td><td class="flex gap-1"><button onclick="openModal('dl',${d.id})" class="btn-s">Düz</button><button onclick="delDl(${d.id})" class="btn-d">Sil</button></td></tr>`).join('')||'<tr><td colspan="5" class="text-center text-gray-500 py-8">Henüz indirme yok</td></tr>'}
        function saveDl(){var n=g('dlName').value,l=g('dlLink').value;if(!n||!l)return alert('İsim ve link gerekli');var arr=ls(K.dl);var obj={name:n,version:g('dlVer').value||'1.0',type:g('dlType').value,link:l};if(editId.dl){var i=arr.findIndex(x=>x.id===editId.dl);arr[i]={...arr[i],...obj}}else{arr.push({id:Date.now(),...obj})}ls(K.dl,arr);loadDl();closeModal('dl');sync();log('İndirme güncellendi');stats()}
        function delDl(id){if(confirm('Silmek istediğinize emin misiniz?')){ls(K.dl,ls(K.dl).filter(x=>x.id!==id));loadDl();sync();log('İndirme silindi');stats()}}
        function loadSponsors(){var arr=ls(K.sponsor);if(!arr.length){arr=[{id:Date.now(),name:'LuaNetwork',tagline:'Minecraft Server',description:'Özgün SkyBlock deneyimi',logo:'luanetwork.png',website:'https://luanetwork.com.tr/',discord:'https://discord.gg/yfpqrY68tM',ip:'mc.luanetwork.com.tr',features:['Özgün SkyBlock sistemi','Özel spawner sistemi','Aktif topluluk']}];ls(K.sponsor,arr)}var el=g('sponsorList');el.innerHTML=arr.map(s=>`<div class="glass p-6"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-orange-500/10 rounded-lg flex items-center justify-center overflow-hidden">${s.logo?`<img src="${s.logo}" class="w-full h-full object-cover" onerror="this.parentElement.innerHTML='<span class=\\'text-orange-500 font-black\\'>${s.name[0]}</span>'">`:`<span class="text-orange-500 font-black">${s.name[0]}</span>`}</div><div><h3 class="font-bold text-lg">${s.name}</h3><p class="text-xs text-gray-500">${s.tagline||''}</p></div></div><div class="flex gap-2"><button onclick='editSponsor(${JSON.stringify(s).replace(/'/g,"\\'")})' class="btn-s">Düz</button><button onclick="delSponsor(${s.id})" class="btn-d">Sil</button></div></div>${s.description?`<p class="text-sm text-gray-400">${s.description}</p>`:''}</div>`).join('')}
        function saveSponsor(){var n=g('spName').value;if(!n)return alert('Sponsor adı gerekli');var arr=ls(K.sponsor);var features=g('spFeatures').value.split('\n').filter(f=>f.trim());var obj={name:n,tagline:g('spTag').value,description:g('spDesc').value,logo:g('spLogo').value,website:g('spWeb').value,discord:g('spDiscord').value,ip:g('spIP').value,features:features};if(editId.sponsor){var i=arr.findIndex(x=>x.id===editId.sponsor);arr[i]={...arr[i],...obj}}else{arr.push({id:Date.now(),...obj})}ls(K.sponsor,arr);loadSponsors();closeModal('sponsor');sync();log('Sponsor güncellendi');stats()}
        function editSponsor(s){editId.sponsor=s.id;g('spName').value=s.name;g('spTag').value=s.tagline||'';g('spDesc').value=s.description||'';g('spLogo').value=s.logo||'';g('spWeb').value=s.website||'';g('spDiscord').value=s.discord||'';g('spIP').value=s.ip||'';g('spFeatures').value=(s.features||[]).join('\n');g('m-sponsor').classList.add('active')}
        function delSponsor(id){if(confirm('Silmek istediğinize emin misiniz?')){ls(K.sponsor,ls(K.sponsor).filter(x=>x.id!==id));loadSponsors();sync();log('Sponsor silindi');stats()}}
        function loadCMS(){var d=ls(K.cms);if(d.hero){g('cmsBadge').value=d.hero.badge||'';g('cmsTitle').value=d.hero.title||'';g('cmsSub').value=d.hero.subtitle||''}}
        function saveCMS(){var d=ls(K.cms);d.hero={badge:g('cmsBadge').value,title:g('cmsTitle').value,subtitle:g('cmsSub').value};ls(K.cms,d);sync();log('CMS güncellendi');alert('CMS kaydedildi!')}
        function loadCookies(){var c=ls(K.cookies);g('cookieTitle').value=c.title||'Bu site temel cerezler kullanir';g('cookieDesc').value=c.description||'Deneyiminizi gelistirmek icin temel cerezleri kullaniyoruz.';g('cookieAccept').value=c.acceptText||'Anladim';g('cookieReject').value=c.rejectText||'Reddet'}
        function saveCookies(){var c={title:g('cookieTitle').value,description:g('cookieDesc').value,acceptText:g('cookieAccept').value,rejectText:g('cookieReject').value};ls(K.cookies,c);sync();log('Çerez ayarları güncellendi');alert('Çerez ayarları kaydedildi!')}
        function loadSettings(){var s=ls(K.settings);g('sDiscord').value=s.discord||'https://discord.gg/y4tAHYGzC6';g('sGithub').value=s.github||'https://github.com/arcanth00';g('sInstagram').value=s.instagram||'';g('sYoutube').value=s.youtube||'';g('sTwitter').value=s.twitter||''}
        function saveSettings(){var s={discord:g('sDiscord').value,github:g('sGithub').value,instagram:g('sInstagram').value,youtube:g('sYoutube').value,twitter:g('sTwitter').value};ls(K.settings,s);sync();log('Ayarlar güncellendi');alert('Ayarlar kaydedildi!')}
        function log(m){var arr=ls(K.act);arr.unshift({message:m,time:new Date().toLocaleTimeString('tr-TR')});if(arr.length>20)arr.pop();ls(K.act,arr);loadAct()}
        function loadAct(){var arr=ls(K.act);g('actList').innerHTML=arr.map(a=>`<div class="glass p-3 flex items-center justify-between text-xs"><span class="font-semibold">${a.message}</span><span class="text-gray-500">${a.time}</span></div>`).join('')||'<div class="glass p-6 text-center text-gray-500">Henüz aktivite yok</div>'}
        function clearAct(){if(confirm('Tüm aktivite günlüğünü temizlemek istediğinize emin misiniz?')){ls(K.act,[]);loadAct()}}
        function stats(){g('s-ann').textContent=ls(K.ann).length;g('s-proj').textContent=ls(K.proj).length;g('s-dl').textContent=ls(K.dl).length;g('s-sponsor').textContent=ls(K.sponsor).length}
        function openModal(t,id){editId[t]=id||null;g('m-'+t).classList.add('active');if(id){var d=ls(K[t]).find(x=>x.id===id);if(t==='ann'){g('annTitle').value=d.title;g('annContent').value=d.content;g('annCat').value=d.category}if(t==='proj'){g('projName').value=d.name;g('projDesc').value=d.description;g('projVer').value=d.version;g('projType').value=d.type;g('projCat').value=d.category||'';g('projStatus').value=d.status;g('projLink').value=d.link;g('projIcon').value=d.icon}if(t==='dl'){g('dlName').value=d.name;g('dlVer').value=d.version;g('dlType').value=d.type;g('dlLink').value=d.link}}else{if(t==='ann'){g('annTitle').value='';g('annContent').value='';g('annCat').value='bilgi'}if(t==='proj'){g('projName').value='';g('projDesc').value='';g('projVer').value='';g('projType').value='modpack';g('projCat').value='';g('projStatus').value='release';g('projLink').value='';g('projIcon').value=''}if(t==='dl'){g('dlName').value='';g('dlVer').value='';g('dlType').value='modpack';g('dlLink').value=''}if(t==='sponsor'){g('spName').value='';g('spTag').value='';g('spDesc').value='';g('spLogo').value='';g('spWeb').value='';g('spDiscord').value='';g('spIP').value='';g('spFeatures').value=''}}}
        function closeModal(t){g('m-'+t).classList.remove('active');editId[t]=null}
    </script>
</body>
</html>
